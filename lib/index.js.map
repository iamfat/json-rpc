{"version":3,"file":"index.js","sources":["../src/rpc.ts","../src/index.ts"],"sourcesContent":[null,null],"names":["nanoid","RPCError","Error","[object Object]","message","code","super","this","RPC","send","options","_options","timeout","on","hash","params","_hashedFunctions","hasOwnProperty","f","Promise","resolve","remoteId","path","value","obj","_remoteObjects","props","split","lastProp","pop","o","p","Reflect","get","set","e","console","debug","then","JSON","parse","stringify","catch","passToRemote","slice","apply","ret","makeRemoteObject","_remoteObjectClusters","map","key","self","_decode","param","Object","has","Proxy","target","prop","sProp","String","notify","_","__","k","Array","isArray","bufferDecode","_encode","hash_sum","@func","isBuffer","bufferEncode","uniqid","rootId","cluster","push","@remote","rpc","extendedRPCs","method","_callingHandlers","handler","once","callback","_patterns","matches","match","pattern","undefined","request","sendError","jsonrpc","remote","getHandler","length","id","decodeNonScalars","result","sendResult","_promises","promise","reject","error","clearTimeout","RemoteObjectHandler","propName","$$baseName","call","$$cache","assign","release$","keys","forEach","get$","data","encodeNonScalars","setTimeout","str","toString","filter","Buffer","s","from"],"mappings":"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"}